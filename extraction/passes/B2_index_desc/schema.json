{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ExperimentIndex",
  "type": "object",
  "additionalProperties": false,
  "required": ["experiments", "extraction_report"],
  "properties": {
    "experiments": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["id_exp", "description", "type", "raw_description"],
        "properties": {
          "id_exp": { "type": "string", "minLength": 1, "maxLength": 200 },
          "type": {
            "title": "Hybridization Probe Classification",
            "description": "Normalized, multi-axis classification for nucleic-acid hybridization probes (literature or product datasheets). All fields are optional to accommodate incomplete metadata.",
            "type": "object",
            "additionalProperties": true,
            "properties": {
              "probe_type": {
                "title": "Probe Type",
                "description": "Functional design/mechanism class of the probe. Use when the probe's reporting/capture behavior is known.",
                "oneOf": [
                  { "const": "linear", "title": "Linear", "description": "Simple oligo that hybridizes without structural activation; often end-labeled." },
                  { "const": "molecular_beacon", "title": "Molecular beacon", "description": "Stem-loop with fluor/quencher; fluorescence turns on when the stem opens on target." },
                  { "const": "hydrolysis_taqman", "title": "Hydrolysis (TaqMan)", "description": "Dual-labeled probe cleaved by 5'->3' exonuclease during PCR; signal increases on cleavage." },
                  { "const": "fret_dual_hybridization", "title": "FRET dual-hybridization", "description": "Two adjacent probes with donor/acceptor dyes; FRET only when both bind nearby." },
                  { "const": "scorpion", "title": "Scorpion", "description": "Primer-linked hairpin probe enabling fast intra-molecular reporting in qPCR." },
                  { "const": "hcr", "title": "Hybridization Chain Reaction (HCR)", "description": "Initiator + hairpins polymerize upon target binding; enzyme-free signal amplification." },
                  { "const": "branched_dna", "title": "Branched DNA (bDNA)", "description": "Signal amplification via multibranch DNA scaffolds without target amplification." },
                  { "const": "padlock", "title": "Padlock", "description": "Linear probe circularizes on perfect match; detected via rolling-circle amplification." },
                  { "const": "capture", "title": "Capture", "description": "Affinity-tagged probe used to enrich/pull down targets (e.g., biotinylated capture baits)." },
                  { "const": "tiling_set", "title": "Tiling set", "description": "Multiple overlapping probes across a region/gene for robust detection." },
                  { "const": "antisense", "title": "Antisense", "description": "Probe designed to bind and block or track transcripts (e.g., ISH tracking)." }
                ]
              },
              "chemistry": {
                "title": "Chemistry Backbone",
                "description": "Backbone and chemical modifications (sequence-level chemistry rather than labels/reporters). Primary nucleic-acid scaffold used by the probe.",
                "oneOf": [
                  { "const": "dna", "title": "DNA", "description": "Unmodified DNA backbone." },
                  { "const": "rna", "title": "RNA", "description": "Unmodified RNA backbone." },
                  { "const": "cdna", "title": "cDNA", "description": "Complementary DNA derived from RNA." },
                  { "const": "pna", "title": "PNA", "description": "Peptide nucleic acid backbone." },
                  { "const": "morpholino", "title": "Morpholino", "description": "Morpholine-ring phosphorodiamidate backbone." },
                  { "const": "lna_modified", "title": "LNA-modified", "description": "DNA/RNA with Locked Nucleic Acid residues incorporated." },
                  { "const": "two_ome_rna", "title": "2′-O-Me RNA", "description": "2′-O-methyl RNA backbone." }
                ]
              },
              "targeting": {
                "title": "Targeting",
                "description": "What the probe is intended to hybridize to, and in what context.",
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "biomolecule": {
                    "title": "Biomolecule",
                    "description": "High-level target class.",
                    "type": "string",
                    "enum": ["dna","rna","mrna","mirna","lncrna","rrna","genomic_dna","viral_rna","amplicon"]
                  },
                  "context": {
                    "title": "Context",
                    "description": "Assay/biological context for the target.",
                    "type": "string",
                    "enum": ["genomic","transcript","amplicon","in_situ","capture"]
                  },
                  "target_name": {
                    "title": "Target Name",
                    "description": "Gene/transcript/locus identifier (free text).",
                    "type": "string"
                  }
                }
              },
              "notes": {
                "title": "Notes",
                "description": "Free-text comments or qualifiers that don’t fit other fields.",
                "type": "string",
                "examples": ["Probe includes internal ZEN quencher."]
              }
            }
          },
          "raw_description": { "type": ["string", "null"], "minLength": 1, "maxLength": 2000 },
          "description": { "type": "string", "minLength": 8, "maxLength": 2000 }
        }
      }
    },
    "extraction_report": {
      "type": "object",
      "additionalProperties": false,
      "required": ["missing", "uncertain", "notes"],
      "properties": {
        "missing": { "type": "array", "items": { "type": "string" }, "minItems": 0 },
        "uncertain": { "type": "array", "items": { "type": "string" }, "minItems": 0 },
        "notes": { "type": ["string", "null"] }
      }
    }
  }
}
